<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="img/Logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="sidebar-styles.css">
    <title>Aura - Banco de psic√≥logos</title>
    <link rel="stylesheet" href="mobile-responsive.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Urbanist', sans-serif;
        }

        a {
            text-decoration: none;
        }

        /* body {
            background-color: #F7F4F2;
            display: flex;
        } */

        body,
        html {
            margin: 0;
            padding: 0;
            height: 100%;
            background-color: #F7F4F2;
            /* background-color: var(--bg-main); */
            font-family: 'Urbanist', sans-serif;
        }

        .corpo {
            margin-left: 3%;
        }

        .topo {
            display: flex;
            flex-direction: column;
            padding: 20px;
            padding-left: 0%;
        }

        .data {
            font-size: 21px;
            font-weight: 550;
            margin-bottom: 5%;
            color: #4F3422;
            padding: 10px 0px;
        }

        .settings-btn {
            position: absolute;
            top: 32px;
            right: 48px;
            width: 32px;
            height: 32px;
            border: none;
            background: transparent;
            cursor: pointer;
            color: var(--text-dark);
            opacity: 0.7;
            transition: opacity 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .settings-btn:hover {
            opacity: 1;
            transform: rotate(30deg);
        }

        .titulo {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #4F3422;
        }

        .titulo h1 {
            font-size: 40px;
        }

        .seta {
            background: none;
            border: none;
            cursor: pointer;
        }

        @media screen and (min-width: 768px) {
            .seta {
                display: none;
            }
        }

        @media screen and (max-width: 768px) {
            .data {
                display: none;
            }
        }

        .cards-container {
            display: flex;
            gap: 100px;
            margin-top: 20px;
        }

        .box-button {
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .box-button:hover {
            transform: scale(1.03);
        }

        .box {
            position: relative;
            width: 460px;
            height: 126px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .box:hover {
            transform: scale(1.03);
        }

        .box .group {
            width: 500px;
            height: 126px;
            top: 0;
            left: 0;
            background-color: #ffffff;
            border-radius: 20px;
        }

        .box .ICONE-LOCAL {
            position: absolute;
            width: 60px;
            height: 57px;
            top: 34px;
            left: 17px;
        }

        .box .monotone-location-wrapper {
            height: 57px;
            background-size: 100% 100%;
        }

        .box .monotone-location {
            position: relative;
            width: 37px;
            height: 38px;
            top: 10px;
            left: 12px;
        }

        .box .img {
            position: absolute;
            width: 50px;
            height: 46px;
            top: 0;
            left: 0;
        }

        .box .div {
            position: absolute;
            width: 177px;
            height: 61px;
            top: 24px;
            left: 91px;
        }

        .box .text-wrapper {
            position: absolute;
            width: 154px;
            top: 44px;
            left: 0;
            font-weight: 600;
            color: #6d513f;
            font-size: 19px;
            white-space: nowrap;
        }

        .box .hello-shinomiya {
            position: absolute;
            width: 173px;
            top: 0;
            left: 0;
            font-weight: 800;
            color: #4e3321;
            font-size: 30px;
            letter-spacing: -0.45px;
            line-height: 56px;
            white-space: nowrap;
        }

        .label {
            width: 329px;
            font-weight: 800;
            color: #4e3321;
            font-size: 30px;
            letter-spacing: -0.45px;
            line-height: 56px;
            white-space: nowrap;
        }

        .profissionais-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 50px;
            margin-top: 20px;
            cursor: pointer;
        }

        .card-profissional {
            width: 400px;
            background: white;
            border-radius: 20px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: transform 0.2s ease;
        }

        .card-profissional:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }

        .card-topo {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .card-distancia {
            font-size: 14px;
            color: #6d513f;
        }

        .card-nome {
            font-size: 20px;
            font-weight: bold;
            color: #4F3422;
        }

        .card-descricao {
            color: #6d513f;
            font-size: 16px;
            margin: 8px 0;
        }

        .card-telefone {
            font-size: 14px;
            color: #6d513f;
        }

        .overlay-filtro {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            z-index: 9999;
        }

        .painel-filtro {
            position: fixed;
            top: 0;
            left: -500px;
            width: 480px;
            height: 100%;
            background-color: #F7F4F2;
            box-shadow: 2px 0 15px rgba(0, 0, 0, 0.2);
            transition: left 0.3s ease;
            z-index: 10000;
            padding: 30px 20px;
            overflow-y: auto;
            border-top-right-radius: 20px;
            border-bottom-right-radius: 20px;
        }

        .painel-filtro.aberto {
            left: 0;
        }

        .filtro-conteudo {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .filtro-conteudo h2 {
            color: #4F3422;
            margin-bottom: 10px;
        }

        .filtro-conteudo label {
            font-weight: bold;
            color: #4F3422;
        }

        .filtro-conteudo select,
        .filtro-conteudo input {
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #ccc;
            background-color: white;
            font-size: 14px;
        }

        .filtro-conteudo .buscar {
            margin-top: 20px;
            padding: 10px;
            background-color: #73804F;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
        }

        .filtro-conteudo .buscar:hover {
            background-color: #5e6b3e;
        }

        .fechar-filtro {
            background: none;
            border: none;
            font-size: 20px;
            position: absolute;
            top: 15px;
            right: 15px;
            cursor: pointer;
        }

        /* Fundo escuro */
        .overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.4);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        /* Caixa do modal */
        .modal {
            background: #F9F6F1;
            border-radius: 20px;
            padding: 30px;
            width: 600px;
            max-width: 95%;
            position: relative;
            box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.2);
        }

        /* Bot√£o fechar */
        .close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 32px;
            color: #555;
            cursor: pointer;
        }

        /* Cabe√ßalho */
        .modal-header {
            text-align: center;
        }

        .avatar {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 30px;
        }

        .nome {
            font-size: 22px;
            font-weight: bold;
            color: #4A2E1F;
            margin-top: 10px;
        }

        .btn-consulta {
            margin-top: 10px;
            padding: 6px 14px;
            background: #6C8A4A;
            color: white;
            border-radius: 20px;
            font-size: 14px;
            border: none;
            cursor: pointer;
        }

        .modal p {
            text-align: center;
            color: #4A2E1F;
            margin-top: 10px;
            line-height: 1.4;
        }

        /* Blocos de informa√ß√£o */
        .info-grid {
            margin-top: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .info-box {
            background: white;
            padding: 15px;
            border-radius: 12px;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .info-box p {
            margin: 4px 0;
            text-align: left;
        }

        .info-box strong {
            display: block;
            margin-bottom: 4px;
            color: #4A2E1F;
        }

        .info-full {
            grid-column: span 2;
        }

        .app-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            background: var(--bg-main);
            overflow: hidden;
            box-sizing: border-box;
        }

        /* Main content area */
        .main-content {
            margin-left: 100px;
            flex: 1;
            padding: 2rem;
            position: relative;
            width: calc(100% - 100px);
            box-sizing: border-box;

            /* ‚úÖ ADICIONE ESTAS 3 LINHAS: */
            overflow-y: auto;
            /* Permite scroll vertical */
            max-height: 100vh;
            /* Limita altura ao viewport */
            min-height: 100vh;
            /* Garante altura m√≠nima */
        }

        .sidebar img {
            display: block;
            width: 28px;
            height: 28px;
            object-fit: contain;
            /* Mant√©m a propor√ß√£o da imagem */
        }

        .sidebar-logo img {
            width: 40px;
            height: 40px;
        }

        .nav-item {
            width: 56px;
            height: 56px;
            background: transparent;
            border: none;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .nav-item img {
            pointer-events: none;
            /* Evita problemas de clique */
        }
    </style>
</head>

<body>
    <div class="app-container" role="main">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-logo">
                <a href="home.html">
                    <img src="img/Logo.png" alt="Logo Aura" width="40" height="40">
                </a>
            </div>
            <nav class="sidebar-nav">
                <a href="home.html" class="nav-item" title="Home">
                    <img src="img/icons-menu/home.png" alt="Home" width="28" height="28">
                </a>
                <a href="banco.html" class="nav-item active" title="Banco de Psic√≥logos">
                    <img src="img/icons-menu/banco.png" alt="Banco de Psic√≥logos" width="28" height="28">
                </a>
                <a href="metricas.html" class="nav-item" title="M√©tricas">
                    <img src="img/icons-menu/metricas.png" alt="M√©tricas" width="28" height="28">
                </a>
                <a href="comunidade.html" class="nav-item" title="Comunidade">
                    <img src="img/icons-menu/comunidade.png" alt="Comunidade" width="28" height="28">
                </a>
            </nav>
            <button class="sidebar-back" onclick="window.location.href='login.html'" alt="Sair">
                <img src="img/icons-menu/sair.png" alt="Sair" width="28" height="28">
            </button>
        </aside>

        <div class="corpo main-content">
            <div class="topo">
                <header>
                    <div class="data">
                        <p><span id="data-atual"></span></p>
                    </div>
                </header>
                <button id="settingsBtn" class="settings-btn" aria-label="Configura√ß√µes" title="Configura√ß√µes">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" width="24" height="24" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z">
                        </path>
                    </svg>
                </button>
                <div class="titulo">
                    <button class="seta"><img src="" alt=""></button>
                    <h1>Banco de Psic√≥logos</h1>
                </div>
            </div>

            <div class="cards-container">
                <div class="box" onclick="abrirLocalizacao()">
                    <div class="group">
                        <div class="ICONE-LOCAL"><img class="img" src="img/banco/ICONE - LOCAL.png"></div>
                        <div class="div">
                            <div class="text-wrapper" id="localizacao-texto"></div>
                            <div class="hello-shinomiya">Localiza√ß√£o</div>
                        </div>
                    </div>
                </div>
                <div class="box box-button" onclick="abrirFiltro()">
                    <div class="group">
                        <div class="ICONE-LOCAL"><img class="img" src="img/banco/filtros.png"></div>
                        <div class="div">
                            <div class="text-wrapper">Tipos de Filtro</div>
                            <div class="hello-shinomiya">Filtros</div>
                        </div>
                    </div>
                </div>
            </div>

            <h2 class="label" style="color:#4F3422; margin-top:40px;">Profissionais Dispon√≠veis</h2>
            <div id="profissionais-container" class="profissionais-grid"></div>

            <!-- Painel de Filtro -->
            <div id="overlay-filtro" class="overlay-filtro" onclick="fecharFiltro()"></div>
            <div id="painel-filtro" class="painel-filtro">
                <div class="filtro-conteudo">
                    <button class="fechar-filtro" onclick="fecharFiltro()">‚úñ</button>
                    <h2>Filtro</h2>
                    <label>Conv√™nio</label>
                    <select id="filtro-convenio">
                        <option value="">Todos</option>
                        <option>Unimed</option>
                        <option>Amil</option>
                    </select>
                    <label>Valor</label>
                    <select id="filtro-valor">
                        <option value="">Todos</option>
                        <option>Gratuito (SUS)</option>
                        <option>At√© R$ 100</option>
                        <option>R$ 100 - R$ 200</option>
                        <option>R$ 200 - R$ 300</option>
                        <option>R$ 300 - R$ 400</option>
                    </select>
                    <label>Tipo de atendimento</label>
                    <select id="filtro-atendimento">
                        <option value="">Todos</option>
                        <option>Online</option>
                        <option>Presencial</option>
                    </select>
                    <label>Faixa Et√°ria</label>
                    <select id="filtro-etaria">
                        <option value="">Todos</option>
                        <option>Infantil</option>
                        <option>Adulto</option>
                    </select>
                    <label>Abordagem terap√™utica</label>
                    <select id="filtro-abordagem">
                        <option value="">Todos</option>
                        <option>TCC</option>
                        <option>Psican√°lise</option>
                    </select>
                    <label>Raio M√°ximo (km)</label>
                    <input type="number" id="filtro-raio" value="10" min="1">
                    <button class="buscar" onclick="aplicarFiltro()">Buscar</button>
                </div>
            </div>
        </div>

        <!-- Overlay + Modal -->
        <div class="overlay" id="overlay">
            <div class="modal">
                <span class="close" id="fecharModal">&times;</span>

                <div class="modal-header">
                    <div class="avatar">üë§</div>
                    <div class="nome" id="modal-nome"></div>
                    <button class="btn-consulta">Marque j√° sua consulta comigo!</button>
                </div>

                <p id="modal-descricao"></p>

                <div class="info-grid">
                    <div class="info-box">
                        <strong>üìç Localiza√ß√£o</strong>
                        <p id="modal-cidade"></p>
                        <p id="modal-endereco"></p>
                    </div>

                    <div class="info-box">
                        <strong>üìû Contato</strong>
                        <p id="modal-linkedin"></p>
                        <p id="modal-email"></p>
                        <p id="modal-telefone"></p>
                    </div>

                    <div class="info-box info-full">
                        <strong>‚ÑπÔ∏è Especifica√ß√µes</strong>
                        <p id="modal-atendimento"></p>
                        <p id="modal-convenios"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const dias = ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "S√°b"];
        const meses = ["Jan", "Fev", "Mar", "Abr", "Mai", "Jun", "Jul", "Ago", "Set", "Out", "Nov", "Dez"];
        const hoje = new Date();
        document.getElementById('data-atual').textContent =
            `${dias[hoje.getDay()]}, ${String(hoje.getDate()).padStart(2, '0')} ${meses[hoje.getMonth()]}, ${hoje.getFullYear()}`;
    </script>

    <script>
        let usuarioLat = null, usuarioLon = null, cidadeUsuario = "Carapicu√≠ba";
        //let profissionaisAtuais = []; // Vari√°vel para armazenar os profissionais atualmente exibidos

        function calcularDistancia(lat1, lon1, lat2, lon2) {
            const R = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat / 2) ** 2 +
                Math.cos(lat1 * Math.PI / 180) *
                Math.cos(lat2 * Math.PI / 180) *
                Math.sin(dLon / 2) ** 2;
            return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        }

        const profissionaisOriginais = [
            {
                nome: "Maria Souza",
                descricao: "Especialista em TCC",
                telefone: "(11) 98765-4321",
                email: "maria.souza@gmail.com",
                linkedin: "linkedin.com/in/maria-souza",
                cidade: "S√£o Paulo",
                endereco: "Av. Paulista, 1000",
                convenio: "Unimed",
                conveniosAceitos: "Unimed, Amil",
                valor: 120,
                atendimento: "Presencial",
                faixaEtaria: "Adulto",
                abordagem: "TCC",
                lat: -23.5505, lon: -46.6333
            },
            {
                nome: "Jo√£o Silva",
                descricao: "Atendimento infantil e adolescente",
                telefone: "(11) 91234-5678",
                email: "joao.silva@gmail.com",
                linkedin: "linkedin.com/in/joao-silva",
                cidade: "Osasco",
                endereco: "Rua Central, 200",
                convenio: "Amil",
                conveniosAceitos: "Amil, SUS",
                valor: 90,
                atendimento: "Online",
                faixaEtaria: "Infantil",
                abordagem: "Psican√°lise",
                lat: -23.523, lon: -46.8408
            },
            {
                nome: "Beyonc√© Knowles",
                descricao: "Psicanalista experiente",
                telefone: "(11) 91268-5789",
                email: "bey.psi@gmail.com",
                linkedin: "linkedin.com/in/beyonce-knowles",
                cidade: "S√£o Paulo",
                endereco: "Rua das Estrelas, 50",
                convenio: "Unimed",
                conveniosAceitos: "Unimed, InterM√©dica",
                valor: 150,
                atendimento: "Presencial",
                faixaEtaria: "Adulto",
                abordagem: "Psican√°lise",
                lat: -23.5891, lon: -46.6586
            }
        ];


        function abrirLocalizacao() {
            const escolha = confirm("Deseja usar sua localiza√ß√£o atual?");
            if (escolha && navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async pos => {
                    usuarioLat = pos.coords.latitude;
                    usuarioLon = pos.coords.longitude;
                    const resp = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${usuarioLat}&lon=${usuarioLon}&format=json`);
                    const data = await resp.json();
                    const cidade = data.address.city || data.address.town || data.address.village || "Local n√£o identificado";
                    cidadeUsuario = cidade;
                    document.getElementById("localizacao-texto").textContent = cidade;
                    renderizarProfissionais(profissionaisOriginais);
                }, digitarCidade);
            } else digitarCidade();
        }

        function digitarCidade() {
            const novaCidade = prompt("Digite sua cidade:");
            if (novaCidade) {
                cidadeUsuario = novaCidade;
                document.getElementById("localizacao-texto").textContent = novaCidade;
            }
        }

        function abrirFiltro() {
            document.getElementById('painel-filtro').classList.add('aberto');
            document.getElementById('overlay-filtro').style.display = 'block';
        }

        function fecharFiltro() {
            document.getElementById('painel-filtro').classList.remove('aberto');
            document.getElementById('overlay-filtro').style.display = 'none';
        }

        // Fun√ß√£o de filtro
        function aplicarFiltro() {
            const convenio = document.getElementById("filtro-convenio").value;
            const valorSel = document.getElementById("filtro-valor").value;
            const atendimento = document.getElementById("filtro-atendimento").value;
            const faixaEtaria = document.getElementById("filtro-etaria").value;
            const abordagem = document.getElementById("filtro-abordagem").value;
            const raio = parseFloat(document.getElementById("filtro-raio").value);

            let valorMax = null;
            if (valorSel === "Gratuito (SUS)") valorMax = 0;
            if (valorSel === "At√© R$ 100") valorMax = 100;
            if (valorSel === "R$ 100 - R$ 200") valorMax = 200;
            if (valorSel === "R$ 200 - R$ 300") valorMax = 300;
            if (valorSel === "R$ 300 - R$ 400") valorMax = 400;

            const filtrados = profissionaisOriginais.filter(p => {
                if (convenio && p.convenio !== convenio) return false;
                if (valorMax != null && p.valor > valorMax) return false;
                if (atendimento && p.atendimento !== atendimento) return false;
                if (faixaEtaria && p.faixaEtaria !== faixaEtaria) return false;
                if (abordagem && p.abordagem !== abordagem) return false;

                if (!isNaN(raio) && usuarioLat != null && usuarioLon != null) {
                    const d = calcularDistancia(usuarioLat, usuarioLon, p.lat, p.lon);
                    if (d > raio) return false;
                }
                return true;
            });

            renderizarProfissionais(filtrados);
            fecharFiltro();
        }
        window.aplicarFiltro = aplicarFiltro;

        // Evento do bot√£o de buscar
        document.getElementById("botao-filtrar").addEventListener("click", aplicarFiltro);
    </script>

    <script>
        /* Vari√°vel global com a lista atual (vinda da API ou filtros) */
        let profissionaisAtuais = [];

        /* renderizarProfissionais: mant√©m a ideia original ‚Äî recebe uma lista e mostra os cards */
        function renderizarProfissionais(lista) {
            profissionaisAtuais = Array.isArray(lista) ? lista : [];

            const container = document.getElementById('profissionais-container');
            container.innerHTML = '';

            if (!profissionaisAtuais.length) {
                container.innerHTML = '<p style="color:#4F3422;">Nenhum profissional cadastrado ainda.</p>';
                return;
            }

            profissionaisAtuais.forEach((p, index) => {
                const card = document.createElement('div');
                card.className = 'card-profissional';
                card.setAttribute('data-index', index);

                // campos do seu JSON: nomeCompleto, tipoAtuacao, email, crp, convenios, modalidadesAtendimento
                const nome = p.nomeCompleto || 'Sem nome';
                const tipo = p.tipoAtuacao || 'Sem tipo definido';
                const crp = p.crp || 'N√£o informado';
                const convenios = Array.isArray(p.convenios) && p.convenios.length ? p.convenios.join(', ') : 'Nenhum';
                const modalidades = Array.isArray(p.modalidadesAtendimento) && p.modalidadesAtendimento.length ? p.modalidadesAtendimento.join(', ') : 'N√£o informado';
                
                card.innerHTML = `
                <div class="card-topo">
                    <div>
                        <div class="card-nome">${nome}</div>
                        <div class="card-descricao">${tipo}</div>
                </div>
            </div>
            <div class="card-telefone">CRP: ${crp}</div>
            <div class="card-telefone">Conv√™nios: ${convenios}</div>
            <div class="card-telefone">Modalidade: ${modalidades}</div>
        `;

                // evento de abrir modal ‚Äî chama abrirModal com o √≠ndice correto
                card.addEventListener('click', () => abrirModal(index));

                container.appendChild(card);
            });
        }

        /* carregarProfissionais: busca da API e chama renderizarProfissionais */
        async function carregarProfissionais() {
            const container = document.getElementById('profissionais-container');
            container.innerHTML = '<p style="color:#4F3422;">Carregando profissionais...</p>';

            try {
                const response = await fetch('https://auratccbackend.onrender.com/api/profissionais', {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' }
                });

                if (!response.ok) {
                    throw new Error('Erro ao buscar profissionais: ' + response.status);
                }

                const profissionais = await response.json();

                if (!Array.isArray(profissionais) || profissionais.length === 0) {
                    container.innerHTML = '<p style="color:#4F3422;">Nenhum profissional cadastrado ainda.</p>';
                    profissionaisAtuais = [];
                    return;
                }

                renderizarProfissionais(profissionais);
                
            } catch (erro) {
                console.error('Erro ao carregar profissionais:', erro);
                container.innerHTML = '<p style="color:red;">Erro ao carregar profissionais. Tente novamente mais tarde.</p>';
            }
        }

        /* abrirModal: usa profissionaisAtuais[index] e preenche o modal j√° existente no HTML */
        function abrirModal(index) {
            const p = profissionaisAtuais[index];
            if (!p) {
                console.error('Profissional n√£o encontrado para index:', index);
                return;
            }

            // Mapeamento seguro dos campos do JSON
            const nome = p.nomeCompleto || p.nome || 'Sem nome';
            const descricao = p.descricao || 'N√£o informado';
            const cidade = p.cidade || '';
            const endereco = p.endereco || '';
            const linkedin = p.linkedin || '';
            const telefone = p.telefone || 'N√£o informado';
            const atendimento = (Array.isArray(p.modalidadesAtendimento) ? p.modalidadesAtendimento.join(', ') : (p.atendimento || 'N√£o informado'));
            const conveniosAceitos = Array.isArray(p.convenios) && p.convenios.length ? p.convenios.join(', ') : 'Nenhum';
            const valor = p.valorConsulta || p.valor || 'N√£o informado';
            const local = p.localizacao || 'N√£o informado';

            // Preenche os elementos do modal (os IDs j√° existem no seu HTML)
            document.getElementById("modal-nome").textContent = nome;
            // descri√ß√£o ‚Äî montamos uma string curta com tipo + valor
            document.getElementById("modal-descricao").textContent = `Valor de consultas particulares: ${valor}`;
            document.getElementById("modal-cidade").textContent = `Me encontro em: ${local}`;
            document.getElementById("modal-endereco").textContent = endereco;
            document.getElementById("modal-linkedin").textContent = linkedin ? `LinkedIn: ${linkedin}` : '';
            document.getElementById("modal-email").textContent = `WhatsApp: ${telefone}`;
            document.getElementById("modal-convenios").textContent = `Mais sobe mim: ${descricao}`;

            // Mostra o overlay/modal (seu HTML j√° tem #overlay com display none por padr√£o)
            const overlay = document.getElementById('overlay');
            if (overlay) overlay.style.display = 'flex';
        }

        /* fecharModal: fecha o overlay */
        function fecharModal() {
            const overlay = document.getElementById('overlay');
            if (overlay) overlay.style.display = 'none';
        }

        /* Ligar eventos do modal (bot√£o fechar e clique fora do modal) */
        document.addEventListener('DOMContentLoaded', () => {
            // Carrega profissionais da API assim que a p√°gina carregar
            carregarProfissionais();

            // Fechar pelo √≠cone
            const btnFechar = document.getElementById('fecharModal');
            if (btnFechar) btnFechar.addEventListener('click', fecharModal);

            // Fechar clicando fora da caixa do modal (no overlay)
            const overlay = document.getElementById('overlay');
            if (overlay) {
                overlay.addEventListener('click', (e) => {
                    // se o clique foi no overlay (fora do .modal), fecha
                    if (e.target === overlay) fecharModal();
                });
            }
        });

        /* Exporta globalmente se outras partes do seu c√≥digo usarem (ex.: aplicarFiltro chama renderizarProfissionais) */
        window.renderizarProfissionais = renderizarProfissionais;
        window.carregarProfissionais = carregarProfissionais;
        window.abrirModal = abrirModal;
        window.fecharModal = fecharModal;
    </script>
    <nav class="mobile-bottom-menu">
        <a href="home.html" class="mobile-menu-item" data-page="home">
            <img src="img/icons-menu/home.png" alt="Home">
        </a>

        <a href="banco.html" class="mobile-menu-item" data-page="banco">
            <img src="img/icons-menu/banco.png" alt="Banco">
        </a>

        <!-- Bot√£o Central - Redireciona para CVV -->
        <a href="https://www.cvv.org.br/" target="_blank" class="mobile-menu-item center-btn">
            <img src="img/icons-menu/telefone.svg" alt="CVV - Centro de Valoriza√ß√£o da Vida">
        </a>

        <a href="metricas.html" class="mobile-menu-item" data-page="metricas">
            <img src="img/icons-menu/metricas.png" alt="M√©tricas">
        </a>

        <a href="comunidade.html" class="mobile-menu-item" data-page="comunidade">
            <img src="img/icons-menu/comunidade.png" alt="Comunidade">
        </a>
    </nav>
</body>

</html>