<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura - Detalhes Paciente</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-logo">
            <img src="assets/logo-sidebar.svg" width="40" height="40" viewBox="0 0 40 40">
            </img>
        </div>
        <nav class="sidebar-nav">
            <a href="dashboard-home.html" class="nav-item">
                <img src="assets/icon-home.svg" width="28" height="28" viewBox="0 0 28 28">
                </img>
            </a>
            <a href="patients.html" class="nav-item active">
                <img src="assets/icon-pacientes.svg" 28" height="28" viewBox="0 0 28 28">
                </img>
            </a>
            <a href="stats.html" class="nav-item">
                <img src="assets/icon-ativid.svg" width="28" height="28" viewBox="0 0 28 28">
                </img>
            </a>
            <a href="community.html" class="nav-item">
                <img src="assets/icon-comunidade.svg" width="28" height="28" viewBox="0 0 28 28"></svg>
            </a>
        </nav>
        <button class="sidebar-back" onclick="window.location.href='/aura/login_prof.html'">
            <img src="assets/icon-sair.svg" width="28" height="28">
        </button>
    </aside>

    <main class="main-content">
        <div class="container-patient-detail">
            <div class="patient-detail-header">
                <div class="patient-detail-avatar">
                    <img src="assets/icon-user.svg" width="80" height="80" viewBox="0 0 80 80" fill="none">
                    <path d="M14 70c0-14.359 11.641-26 26-26s26 11.641 26 26" stroke="#4F3422" stroke-width="3"
                        fill="none" />
                    </img>
                </div>
                <div class="patient-detail-info">
                    <h1 class="patient-detail-name"></h1>
                    <p class="patient-detail-birth"></p>
                    <p class="patient-detail-type"></p>
                </div>
                <button class="close-btn" onclick="window.location.href='patients.html'">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <path d="M24 8L8 24M8 8L24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
            </div>

            <div class="patient-detail-grid">
                <!-- coluna esquerda - pontuário -->
                <div class="patient-detail-main">
                    <div class="pontuario-card" id="pontuario-card">
                        <div class="pontuario-header">
                            <div class="pontuario-title-wrapper">
                                <img src="assets/icon-ativid-marrom.svg" width="32" height="32" viewBox="0 0 32 32"
                                    fill="none" />
                                <h2 class="pontuario-title">Pontuário</h2>
                            </div>
                        </div>

                        <div class="pontuario-section">
                            <h3 class="pontuario-section-title">Diagnóstico / Hipoteses</h3>
                            <p class="pontuario-text editable-text">Transtorno de ansiedade generalizada</p>
                        </div>

                        <div class="pontuario-section">
                            <h3 class="pontuario-section-title">Plano terapêutico</h3>
                            <p class="pontuario-text editable-text">Terapia cognitivo-comportamental</p>
                            <p class="pontuario-text editable-text">Técnicas de respiração</p>
                        </div>

                        <div class="pontuario-section">
                            <h3 class="pontuario-section-title">Evolução</h3>
                            <p class="pontuario-text editable-text">Paciente anda demonstrando boas evoluções com as
                                atividades postadas para ele.</p>
                        </div>

                        <div class="detail-actions">
                            <button class="detail-btn detail-btn-secondary" id="edit-pontuario-btn">Editar</button>
                            <button class="detail-btn detail-btn-primary" id="save-pontuario-btn"
                                style="display: none;">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- coluna direita - cards ações -->
                <div class="patient-detail-sidebar">
                    <div class="detail-action-card" id="history-card" onclick="openModal('history-modal')">
                        <div class="detail-action-content">
                            <h3 class="detail-action-title">Histórico de consultas</h3>
                            <p class="detail-action-text">Ver histórico de consultas completo desse paciente</p>
                        </div>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>

                    <div class="detail-action-card" id="open-analysis-btn" onclick="openModal('analysis-modal')">
                        <div class="detail-action-content">
                            <h3 class="detail-action-title">Análise</h3>
                            <p class="detail-action-text">Ver suas análises sobre esse paciente</p>
                        </div>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>

                    <div class="detail-action-card" id="patient-tasks-card" onclick="openModal('patient-tasks-modal')">
                        <div class="detail-action-content">
                            <h3 class="detail-action-title">Tarefas recentes</h3>
                            <p class="detail-action-text">Ver tarefas atribuídas a esse paciente</p>
                        </div>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- modal histórico de consultas -->
    <div id="history-modal" class="modal">
        <div class="modal-content-large">
            <div class="modal-header">
                <h3 class="modal-title-large" id="history-title"></h3>
                <button class="close-modal-btn" id="close-history-modal" onclick="closeModal('history-modal')">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
            </div>
            <div class="history-list" id="history-list">
                <p class="no-data-text">Este paciente ainda não tem consultas agendadas.</p>
            </div>
        </div>
    </div>

    <!-- modal análise -->
    <div id="analysis-modal" class="modal">
        <div class="modal-content-large">
            <div class="modal-header">
                <h3 class="modal-title-large">Análise</h3>
                <button class="close-modal-btn" id="close-analysis-modal" onclick="closeModal('analysis-modal')">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
            </div>
            <button class="add-annotation-btn" id="add-analysis-btn">
                + Adicionar uma nova anotação
            </button>
            <button class="modal-btn modal-btn-confirm" id="delete-analysis-btn"
                style="margin-top: 12px; display: none;" onclick="openModal('delete-analysis-modal')">
                Excluir Selecionadas
            </button>
            <div class="analysis-entries" id="analysis-entries">
                <div class="analysis-entry">
                    <p class="analysis-date">10/03/2025</p>
                    <p class="analysis-text">Primeira sessão de terapia. Paciente apresentou queixa de ansiedade e
                        dificuldades de organização no trabalho.</p>
                </div>
                <div class="analysis-entry">
                    <p class="analysis-date">17/03/2025</p>
                    <p class="analysis-text">O paciente relata leve melhora no gerenciamento de tempo, porém continua
                        apresentando episódios de ansiedade intensa.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- add análise modal -->
    <div id="add-analysis-modal" class="modal">
        <div class="modal-content">
            <h3 class="modal-title">Nova Anotação</h3>
            <textarea id="new-analysis-text" class="form-textarea" placeholder="Digite sua anotação..."
                rows="6"></textarea>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-cancel" id="cancel-analysis"
                    onclick="closeModal('add-analysis-modal')">Cancelar</button>
                <button class="modal-btn modal-btn-primary" id="save-analysis"
                    onclick="openModal('save-analysis-confirm-modal')">Salvar</button>
            </div>
        </div>
    </div>

    <!-- confirmar salvar análise - modal -->
    <div id="save-analysis-confirm-modal" class="modal">
        <div class="modal-content">
            <h3 class="modal-title">Confirmar</h3>
            <p class="modal-text">Tem certeza que deseja salvar esta anotação?</p>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-cancel" id="cancel-save-analysis"
                    onclick="closeModal('save-analysis-confirm-modal')">Cancelar</button>
                <button class="modal-btn modal-btn-primary" id="confirm-save-analysis"
                    onclick="saveAnalysis()">Salvar</button>
            </div>
        </div>
    </div>

    <!-- tarefas do paciente modal -->
    <div id="patient-tasks-modal" class="modal">
        <div class="modal-content-large">
            <div class="modal-header">
                <h3 class="modal-title-large" id="tasks-title"></h3>
                <button class="close-modal-btn" id="close-tasks-modal" onclick="closeModal('patient-tasks-modal')">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
            </div>
            <div class="tasks-list" id="patient-tasks-list">
                <p class="no-data-text">Este paciente ainda não tem tarefas atribuídas.</p>
            </div>
        </div>
    </div>

    <!-- confirmar as alterações no pontuário modal -->
    <div id="save-pontuario-modal" class="modal">
        <div class="modal-content">
            <h3 class="modal-title">Confirmar alterações</h3>
            <p class="modal-text">Tem certeza que deseja salvar as alterações no pontuário?</p>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-cancel" id="cancel-save-pontuario"
                    onclick="closeModal('save-pontuario-modal')">Cancelar</button>
                <button class="modal-btn modal-btn-primary" id="confirm-save-pontuario"
                    onclick="savePontuario()">Salvar</button>
            </div>
        </div>
    </div>

    <!-- deletar dados da análise - modal -->
    <div id="delete-analysis-modal" class="modal">
        <div class="modal-content">
            <h3 class="modal-title">Confirmar exclusão</h3>
            <p class="modal-text">Tem certeza que deseja excluir as anotações selecionadas?</p>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-cancel" id="cancel-delete-analysis"
                    onclick="closeModal('delete-analysis-modal')">Cancelar</button>
                <button class="modal-btn modal-btn-confirm" id="confirm-delete-analysis"
                    onclick="deleteAnalysis()">Excluir</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>